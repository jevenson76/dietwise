import{t as C,j as t,d as f,a as S}from"./index-DWwpKClp-1751137607256.js";import{r as c}from"./stripe-vendor-BMrTtkyQ-1751137607256.js";import{W as E,a as R}from"./WeightLogFormComponent-DSawYShd-1751137607256.js";import{l as y,L as p,I as w,u}from"./date-vendor-B5WjnTJ1-1751137607256.js";import"./react-vendor-DV_4xMyD-1751137607256.js";import"./pdf-vendor-BCxNDtfI-1751137607256.js";import"./ai-vendor-D-53sdHu-1751137607256.js";import"./scanner-vendor-UkOZGUfT-1751137607256.js";import"./chart-vendor-B6MxKzHV-1751137607256.js";import"./MetricsCard-CT0fo2UK-1751137607256.js";const z=({userProfile:e,actualWeightLog:a,onAddWeightEntry:k,reminderSettings:n,onUpdateReminderSettings:D,isProfileComplete:b,currentTheme:j})=>{const[d,g]=c.useState(!1),[x,o]=c.useState(null);c.useEffect(()=>{if(!e.targetWeight){g(!1),o(null);return}const m=y(new Date);let h=null;if(n.lastWeighInReminderDismissedDate)try{h=y(p(n.lastWeighInReminderDismissedDate))}catch(s){}if(h&&w(h,"yyyy-MM-dd")===w(m,"yyyy-MM-dd"))g(!1);else{let s=null;if(a.length>0)try{s=y(p(a[a.length-1].date))}catch(l){}const r=s?u(m,s)>=n.weighInFrequencyDays:!!(e.targetWeight&&(e.weight||e.profileCreationDate)&&(u(m,e.profileCreationDate?p(e.profileCreationDate):new Date(0))>=1||e.weight));r&&!d&&C("weigh_in_reminder_shown",{frequencyDays:n.weighInFrequencyDays,lastWeighIn:s==null?void 0:s.toISOString()}),g(r)}const i=e.name?`, ${e.name}`:"";if(a.length>1&&e.targetWeight){const s=e.startWeight||a[0].weight,r=a[a.length-1].weight,l=e.targetWeight;l<s&&r<s||l>s&&r>s?Math.abs(r-l)<Math.abs(s-l)?Math.abs(r-l)<=5?o(`You're so close to your goal${i}! Amazing dedication!`):o(`Great job on your progress${i}! Keep up the fantastic work.`):o(`Steady progress is key${i}. Keep pushing towards your goal!`):o(s!==r?`Every weigh-in is a data point${i}. Stay focused on your goal!`:`Consistency is important${i}. You've got this!`)}else a.length===1?o(`First weigh-in logged${i}! This is the start of your journey.`):o(`Ready to track your progress${i}? Log your first weigh-in!`)},[a,e,n.weighInFrequencyDays,n.lastWeighInReminderDismissedDate,d]);const v=()=>{D({lastWeighInReminderDismissedDate:new Date().toISOString()}),g(!1)},I=a.length>0?a[a.length-1].weight:e.weight;return b?e.targetWeight===null?t.jsxs("div",{className:"bg-bg-card p-6 sm:p-8 rounded-xl shadow-xl mt-6 sm:mt-8",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-text-default mb-4",children:[t.jsx("i",{className:"fas fa-chart-line mr-2.5 text-sky-500 dark:text-sky-400"}),"Progress Tracking"]}),t.jsx(f,{icon:"fas fa-bullseye",iconColor:"text-orange-500 dark:text-orange-400",title:"Set Your Goal",description:"Define your target weight to start tracking your progress and see how far you've come.",actionLabel:"Set Target Weight",onAction:()=>window.dispatchEvent(new CustomEvent("navigate-to-settings")),tips:["Set a realistic and healthy weight goal","Track your progress with regular weigh-ins","Visualize your journey with progress charts"]})]}):t.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[d&&t.jsx(S,{type:"info",message:`Time for your weigh-in, ${e.name||"User"}! Logging your weight regularly helps track progress towards your goal of ${e.targetWeight} lbs.`,onClose:v}),x&&!d&&t.jsx("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 dark:from-teal-900/50 dark:to-cyan-900/50 p-4 rounded-lg shadow-md border-l-4 border-teal-500 dark:border-teal-400",children:t.jsxs("p",{className:"text-sm font-medium text-teal-700 dark:text-teal-300 flex items-center",children:[t.jsx("i",{className:"fas fa-trophy mr-2.5 text-yellow-500 dark:text-yellow-400"})," ",x]})}),t.jsx(E,{userProfile:e,actualWeightLog:a,currentTheme:j}),t.jsx(R,{onAddWeightEntry:k,latestWeight:I})]}):t.jsxs("div",{className:"bg-bg-card p-6 sm:p-8 rounded-xl shadow-xl mt-6 sm:mt-8",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-text-default mb-4",children:[t.jsx("i",{className:"fas fa-chart-line mr-2.5 text-sky-500 dark:text-sky-400"}),"Progress Tracking"]}),t.jsx(f,{icon:"fas fa-user-check",iconColor:"text-sky-500 dark:text-sky-400",title:"Complete Your Profile",description:"We need a few more details to create your personalized progress tracking.",actionLabel:"Go to Settings",onAction:()=>window.dispatchEvent(new CustomEvent("navigate-to-settings")),tips:["Add your current weight and height","Set your target weight goal","Select your activity level for accurate calculations"]})]})};export{z as ProgressTabComponent};
