import{j as e,v,e as k}from"./index-sOLfNbJt-1751134427739.js";import{r as y}from"./stripe-vendor-18sUXpVQ-1751134427739.js";import{a as D,W as T}from"./WeightLogFormComponent-MbSnRFFN-1751134427739.js";import{I as W,L as C}from"./date-vendor-B5WjnTJ1-1751134427739.js";import"./react-vendor-DV_4xMyD-1751134427739.js";import"./pdf-vendor-BD44sDxa-1751134427739.js";import"./ai-vendor-D-53sdHu-1751134427739.js";import"./scanner-vendor-UkOZGUfT-1751134427739.js";import"./chart-vendor-BjvvCLW4-1751134427739.js";import"./MetricsCard-DyxJ09rB-1751134427739.js";const S=({profile:t,onTargetWeightChange:r,onTargetDateChange:j})=>{const[g,p]=y.useState(""),b=t.weight,d=50,x=500,s=t.targetWeight===null||t.targetWeight===void 0?b||(d+x)/2:t.targetWeight,N=n=>{r(parseFloat(n.target.value))},u=n=>{const i=n.target.value,c=v("targetWeight",i);if(p((c==null?void 0:c.message)||""),i==="")r(null);else{const o=parseFloat(i);isNaN(o)||r(o)}},a=n=>{j(n.target.value?n.target.value:null)},l="mt-1 block w-full px-4 py-2.5 border border-border-default rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 sm:text-sm placeholder-slate-400 bg-bg-card text-text-default dark:placeholder-slate-500",m=W(new Date,"yyyy-MM-dd");return e.jsxs("div",{className:"bg-bg-card p-6 sm:p-8 rounded-xl shadow-xl mt-6 sm:mt-8",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-text-default mb-6 border-b border-border-default pb-4",children:[e.jsx("i",{className:"fas fa-bullseye mr-2.5 text-orange-500"}),"Your Weight Goal"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"targetWeightInput",className:"block text-sm font-medium text-text-alt mb-2",children:"Target Weight (lbs)"}),e.jsx("input",{type:"number",name:"targetWeightInput",id:"targetWeightInput",value:t.targetWeight===null?"":t.targetWeight,onChange:u,className:`${l} text-2xl font-bold text-center py-4 ${g?"border-red-500":""}`,placeholder:"Enter target weight",disabled:!t.weight,min:d,max:x,"aria-label":"Target weight input"}),g&&e.jsxs("p",{className:"mt-1 text-sm text-red-500",role:"alert",children:[e.jsx("i",{className:"fas fa-exclamation-circle mr-1"}),g]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"targetWeight",className:"block text-xs font-medium text-text-alt mb-2",children:"Or use slider to adjust"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:d}),e.jsx("input",{type:"range",id:"targetWeight",name:"targetWeight",min:d,max:x,step:"1",value:s,onChange:N,className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-teal-600 dark:accent-teal-500 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-teal-600 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-teal-600 [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-0",disabled:!t.weight,"aria-label":"Target weight slider"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:x})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"targetDate",className:"block text-sm font-medium text-text-alt",children:"Target Date (Optional)"}),e.jsx("input",{type:"date",id:"targetDate",name:"targetDate",value:t.targetDate||"",onChange:a,className:`${l} dark:[color-scheme:dark]`,min:m,disabled:!t.targetWeight||!t.weight,"aria-label":"Target date for weight goal"}),t.targetDate&&t.targetWeight&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Aiming for ",t.targetWeight," lbs by ",W(C(t.targetDate),"MMM d, yyyy"),"."]})]}),t.weight&&t.targetWeight!==null&&e.jsxs("p",{className:"text-sm text-text-alt pt-2",children:["Current: ",e.jsxs("span",{className:"font-semibold text-text-default",children:[t.weight," lbs"]}),". Goal: ",e.jsxs("span",{className:"font-semibold text-text-default",children:[t.targetWeight," lbs"]}),". Difference: ",e.jsxs("span",{className:"font-semibold text-teal-700 dark:text-teal-500",children:[(t.targetWeight-t.weight).toFixed(1)," lbs"]}),"."]}),!t.weight&&e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 border-l-4 border-orange-400 text-orange-700 dark:text-orange-300 p-4 rounded-md",role:"alert",children:e.jsxs("p",{className:"font-medium",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"Please enter your current weight to set a target."]})})]})]})},Y=({userProfile:t,weightLog:r,onWeightLog:j,onTargetWeightChange:g,onTargetDateChange:p,targetCalories:b,isPremiumUser:d,onUpgradeClick:x})=>{k();const s=y.useMemo(()=>{var c,o;if(r.length===0)return{currentWeight:t.weight,startWeight:t.startWeight,weightChange:0,trend:"stable"};const a=[...r].sort((h,w)=>new Date(h.date).getTime()-new Date(w.date).getTime()),l=((c=a[a.length-1])==null?void 0:c.weight)||t.weight,m=t.startWeight||((o=a[0])==null?void 0:o.weight)||t.weight,n=l&&m?l-m:0;let i="stable";if(a.length>=3){const h=a.slice(-3),w=h[0].weight,f=h[h.length-1].weight-w;f>1?i="up":f<-1&&(i="down")}return{currentWeight:l,startWeight:m,weightChange:n,trend:i}},[r,t.weight,t.startWeight]),N=()=>{switch(s.trend){case"up":return"📈";case"down":return"📉";default:return"➡️"}},u=()=>{if(!t.targetWeight||!s.currentWeight)return"text-gray-500";const a=t.targetWeight<(t.startWeight||t.weight||0);switch(s.trend){case"up":return a?"text-red-500":"text-green-500";case"down":return a?"text-green-500":"text-red-500";default:return"text-gray-500"}};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-700 p-6 sm:p-8 rounded-2xl shadow-xl border border-blue-100 dark:border-slate-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-text-default",children:[e.jsx("i",{className:"fas fa-weight mr-3 text-blue-500"}),"Weight Tracking"]}),e.jsx("p",{className:"text-text-alt text-sm mt-1",children:"Monitor your progress and stay on track"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-text-alt",children:"Daily Calories"}),e.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:b?b.toLocaleString():"--"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-weight-hanging text-3xl text-blue-500 mb-3"}),e.jsx("p",{className:"text-sm text-text-alt mb-1",children:"Current Weight"}),e.jsx("p",{className:"text-3xl font-bold text-text-default",children:s.currentWeight?`${s.currentWeight} lbs`:"Not set"})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:`fas fa-chart-line text-3xl mb-3 ${u()}`}),e.jsx("p",{className:"text-sm text-text-alt mb-1",children:"Weight Change"}),e.jsx("p",{className:`text-3xl font-bold ${u()}`,children:s.weightChange!==0?`${s.weightChange>0?"+":""}${s.weightChange.toFixed(1)} lbs`:"0 lbs"}),e.jsxs("p",{className:"text-xs text-text-alt mt-1",children:[N()," ",s.trend==="stable"?"Stable":s.trend==="up"?"Trending up":"Trending down"]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-slate-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-bullseye text-3xl text-green-500 mb-3"}),e.jsx("p",{className:"text-sm text-text-alt mb-1",children:"To Goal"}),e.jsx("p",{className:"text-3xl font-bold text-text-default",children:t.targetWeight&&s.currentWeight?`${Math.abs(s.currentWeight-t.targetWeight).toFixed(1)} lbs`:"Set goal"}),t.targetDate&&e.jsxs("p",{className:"text-xs text-text-alt mt-1",children:["By ",new Date(t.targetDate).toLocaleDateString()]})]})})]})]}),e.jsxs("div",{className:"bg-bg-card p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-semibold text-text-default mb-6 border-b border-border-default pb-4",children:[e.jsx("i",{className:"fas fa-plus-circle mr-2.5 text-green-500"}),"Log Today's Weight"]}),e.jsx(D,{onWeightLog:j,currentWeight:s.currentWeight})]}),e.jsx(S,{profile:t,onTargetWeightChange:g,onTargetDateChange:p}),e.jsxs("div",{className:"bg-bg-card p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-semibold text-text-default",children:[e.jsx("i",{className:"fas fa-chart-area mr-2.5 text-purple-500"}),"Weight Progress"]}),!d&&r.length>=10&&e.jsxs("button",{onClick:x,className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:shadow-lg transition-all text-sm",children:[e.jsx("i",{className:"fas fa-crown mr-2"}),"Advanced Charts"]})]}),r.length>0?e.jsx(T,{weightLog:r,targetWeight:t.targetWeight,startWeight:t.startWeight,targetDate:t.targetDate,showAdvanced:d}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fas fa-chart-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-text-default mb-2",children:"Start Tracking Your Weight"}),e.jsx("p",{className:"text-text-alt",children:"Log your first weight entry to see your progress chart here."})]})]}),e.jsxs("div",{className:"bg-bg-card p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-semibold text-text-default mb-6 border-b border-border-default pb-4",children:[e.jsx("i",{className:"fas fa-history mr-2.5 text-blue-500"}),"Recent Weigh-ins"]}),r.length>0?e.jsxs("div",{className:"space-y-3",children:[[...r].sort((a,l)=>new Date(l.date).getTime()-new Date(a.date).getTime()).slice(0,10).map((a,l)=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${l===0?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l===0?"bg-blue-500":"bg-gray-400"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-text-default",children:[a.weight," lbs"]}),e.jsx("p",{className:"text-sm text-text-alt",children:new Date(a.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]})]}),l===0&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Latest"})]},`${a.date}-${a.weight}`)),r.length>10&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("p",{className:"text-sm text-text-alt",children:["Showing 10 most recent entries. Total: ",r.length," weigh-ins"]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fas fa-scale-unbalanced text-4xl text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-text-alt",children:"No weigh-ins recorded yet. Start by logging your current weight above!"})]})]})]})};export{Y as default};
