import{e as A,j as e}from"./index-DRZjvlLE-1751136307083.js";import{r as M}from"./stripe-vendor-0Ywx0Z1e-1751136307083.js";const B=({data:r,title:c,subtitle:f,height:o=200,showTarget:h=!1,showDots:L=!0,showArea:j=!0,color:v="#14b8a6",targetColor:S="#ef4444",timeframe:k="week",unit:i="",className:g=""})=>{var E,U;const{isMobile:b}=A(),[x,y]=M.useState(null),[P,t]=M.useState(!1),s=M.useMemo(()=>{if(r.length===0)return{points:[],targetPoints:[],maxValue:0,minValue:0};const a=r.map(n=>n.value),l=r.map(n=>n.target||0).filter(n=>n>0),p=[...a,...l],w=Math.max(...p),H=Math.min(...p),W=(w-H)*.1,V=w+W,N=Math.max(0,H-W),G=b?300:400,D=40,O=G-D*2,$=o-40,q=r.map((n,F)=>({x:D+F*O/Math.max(r.length-1,1),y:$-(n.value-N)/(V-N)*$+20,value:n.value,date:n.date,label:n.label})),z=h?r.map((n,F)=>({x:D+F*O/Math.max(r.length-1,1),y:n.target?$-(n.target-N)/(V-N)*$+20:null,value:n.target,date:n.date})):[];return{points:q,targetPoints:z,maxValue:V,minValue:N,width:G}},[r,o,b,h]),u=a=>{const l=new Date(a);switch(k){case"week":return l.toLocaleDateString("en-US",{weekday:"short"});case"month":return l.toLocaleDateString("en-US",{day:"numeric"});case"quarter":return l.toLocaleDateString("en-US",{month:"short",day:"numeric"});case"year":return l.toLocaleDateString("en-US",{month:"short"});default:return l.toLocaleDateString("en-US",{month:"short",day:"numeric"})}},m=(()=>{if(r.length<2)return null;const a=r[0].value,p=r[r.length-1].value-a,w=p/a*100;return{direction:p>0?"up":p<0?"down":"stable",percentage:Math.abs(w),value:Math.abs(p)}})();if(s.points.length===0)return e.jsx("div",{className:`bg-bg-card rounded-xl p-6 shadow-lg border border-border-default ${g}`,children:e.jsxs("div",{className:"text-center text-text-alt",children:[e.jsx("i",{className:"fas fa-chart-line text-2xl mb-2"}),e.jsx("p",{children:"No data available"})]})});const T=s.points.map((a,l)=>`${l===0?"M":"L"} ${a.x} ${a.y}`).join(" "),R=j?`${T} L ${s.points[s.points.length-1].x} ${o-20} L ${s.points[0].x} ${o-20} Z`:"",C=h&&s.targetPoints.length>0?s.targetPoints.filter(a=>a.y!==null).map((a,l)=>`${l===0?"M":"L"} ${a.x} ${a.y}`).join(" "):"";return e.jsxs("div",{className:`bg-bg-card rounded-xl p-6 shadow-lg border border-border-default ${g}`,children:[(c||f||m)&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[c&&e.jsx("h3",{className:"text-lg font-semibold text-text-default",children:c}),f&&e.jsx("p",{className:"text-sm text-text-alt",children:f})]}),m&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:`flex items-center space-x-1 ${m.direction==="up"?"text-green-500":m.direction==="down"?"text-red-500":"text-gray-500"}`,children:[e.jsx("i",{className:`fas fa-arrow-${m.direction==="up"?"up":m.direction==="down"?"down":"right"} text-xs`}),e.jsxs("span",{className:"text-sm font-medium",children:[m.percentage.toFixed(1),"%"]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{width:s.width,height:o,className:"overflow-visible",children:[e.jsx("g",{className:"opacity-20",children:Array.from({length:4},(a,l)=>e.jsx("line",{x1:40,y1:20+l*(o-40)/3,x2:s.width-40,y2:20+l*(o-40)/3,stroke:"currentColor",strokeWidth:1,className:"text-gray-400"},l))}),j&&e.jsx("path",{d:R,fill:"url(#areaGradient)",opacity:.3}),h&&C&&e.jsx("path",{d:C,fill:"none",stroke:S,strokeWidth:2,strokeDasharray:"5,5",opacity:.7}),e.jsx("path",{d:T,fill:"none",stroke:v,strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm"}),L&&s.points.map((a,l)=>e.jsx("circle",{cx:a.x,cy:a.y,r:x===l?6:4,fill:v,className:"cursor-pointer transition-all duration-200 drop-shadow-sm",onMouseEnter:()=>{y(l),t(!0)},onMouseLeave:()=>{y(null),t(!1)}},l)),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:v,stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:v,stopOpacity:.1})]})})]}),P&&x!==null&&e.jsxs("div",{className:"absolute bg-gray-900 text-white p-3 rounded-lg shadow-lg pointer-events-none z-10 transform -translate-x-1/2 -translate-y-full",style:{left:s.points[x].x,top:s.points[x].y-10},children:[e.jsx("div",{className:"text-sm font-medium",children:u(s.points[x].date)}),e.jsxs("div",{className:"text-xs",children:[s.points[x].value.toLocaleString(),i]}),r[x].target&&e.jsxs("div",{className:"text-xs opacity-75",children:["Target: ",(E=r[x].target)==null?void 0:E.toLocaleString(),i]})]})]}),e.jsx("div",{className:"flex justify-between mt-2 px-10",children:s.points.map((a,l)=>e.jsx("span",{className:"text-xs text-text-alt",style:{transform:b&&r.length>7?"rotate(-45deg)":"none",transformOrigin:"center"},children:u(a.date)},l))}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-border-default",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-text-alt",children:"Current"}),e.jsxs("p",{className:"text-sm font-semibold text-text-default",children:[(U=r[r.length-1])==null?void 0:U.value.toLocaleString(),i]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-text-alt",children:"Average"}),e.jsxs("p",{className:"text-sm font-semibold text-text-default",children:[(r.reduce((a,l)=>a+l.value,0)/r.length).toFixed(1),i]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-text-alt",children:"Peak"}),e.jsxs("p",{className:"text-sm font-semibold text-text-default",children:[Math.max(...r.map(a=>a.value)).toLocaleString(),i]})]})]})]})},J=({title:r,metrics:c,icon:f,variant:o="default",showTrends:h=!0,showProgress:L=!0,animated:j=!0,className:v=""})=>{const{isMobile:S}=A(),[k,i]=M.useState(null),g=(t,s,u)=>{let d;switch(s){case"percentage":d=`${t.toFixed(1)}%`;break;case"decimal":d=t.toFixed(2);break;case"currency":d=`$${t.toFixed(2)}`;break;default:d=t.toLocaleString()}return u?`${d} ${u}`:d},b=(t,s)=>s?t>s?e.jsx("i",{className:"fas fa-arrow-up text-green-500 text-xs"}):t<s?e.jsx("i",{className:"fas fa-arrow-down text-red-500 text-xs"}):e.jsx("i",{className:"fas fa-minus text-gray-400 text-xs"}):null,x=(t,s)=>{if(!s||s===0)return null;const u=(t-s)/s*100;return Math.abs(u).toFixed(1)},y=(t,s)=>!s||s===0?0:Math.min(t/s*100,100),P=(t,s)=>{const u=k===s,d=x(t.value,t.previousValue),m=y(t.value,t.target);return o==="compact"?e.jsx("div",{className:`p-3 rounded-lg transition-all duration-200 cursor-pointer ${u?"bg-gray-50 dark:bg-gray-800 scale-105":"bg-transparent"}`,onMouseEnter:()=>i(s),onMouseLeave:()=>i(null),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-alt",children:t.label}),e.jsx("p",{className:"text-lg font-bold text-text-default",children:g(t.value,t.format,t.unit)})]}),h&&d&&e.jsxs("div",{className:"flex items-center space-x-1",children:[b(t.value,t.previousValue),e.jsxs("span",{className:"text-xs text-text-alt",children:[d,"%"]})]})]})},s):e.jsxs("div",{className:`p-4 border border-border-default rounded-lg transition-all duration-300 cursor-pointer ${u?"shadow-lg border-teal-300 dark:border-teal-600 transform scale-105":"shadow-sm"} ${j?"animate-fade-in":""}`,style:{animationDelay:`${s*100}ms`},onMouseEnter:()=>i(s),onMouseLeave:()=>i(null),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-text-alt",children:t.label}),h&&d&&e.jsxs("div",{className:"flex items-center space-x-1",children:[b(t.value,t.previousValue),e.jsxs("span",{className:"text-xs text-text-alt",children:[d,"%"]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`font-bold text-text-default ${S?"text-xl":"text-2xl"}`,children:g(t.value,t.format,t.unit)}),t.target&&e.jsxs("p",{className:"text-xs text-text-alt mt-1",children:["Target: ",g(t.target,t.format,t.unit)]})]}),L&&t.target&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-text-alt",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[m.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-1000 ease-out ${t.color||"bg-teal-500"}`,style:{width:`${j?m:0}%`,transition:j?"width 1s ease-out":"none"}})})]}),o==="detailed"&&t.previousValue!==void 0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border-default",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-alt",children:"Previous:"}),e.jsx("span",{className:"text-text-default",children:g(t.previousValue,t.format,t.unit)})]})})]},s)};return e.jsxs("div",{className:`bg-bg-card rounded-xl shadow-lg border border-border-default p-6 ${v}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[f&&e.jsx("div",{className:"mr-3",children:e.jsx("i",{className:`${f} text-xl text-teal-500`})}),e.jsx("h3",{className:"text-lg font-semibold text-text-default",children:r})]}),e.jsx("div",{className:`grid gap-4 ${o==="compact"||c.length===1?"grid-cols-1":c.length===2?"grid-cols-1 sm:grid-cols-2":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"}`,children:c.map((t,s)=>P(t,s))}),o==="detailed"&&c.length>1&&e.jsx("div",{className:"mt-6 pt-4 border-t border-border-default",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-alt",children:"Average"}),e.jsx("p",{className:"text-sm font-semibold text-text-default",children:(c.reduce((t,s)=>t+s.value,0)/c.length).toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-alt",children:"Total"}),e.jsx("p",{className:"text-sm font-semibold text-text-default",children:c.reduce((t,s)=>t+s.value,0).toLocaleString()})]})]})})]})};export{J as M,B as T};
