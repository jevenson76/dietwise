import{e as X,j as e,i as Y,d as ee}from"./index-DDRjDb2e-1751135135933.js";import{r as $}from"./stripe-vendor-BzNs2l9W-1751135135933.js";import{C as U,r as te}from"./chart-vendor-DS6ceQrk-1751135135933.js";import{M as se,T as ae}from"./MetricsCard-Bf8QXJk9-1751135135933.js";import{N as _,Q as V,R as re,I as B,k as le}from"./date-vendor-B5WjnTJ1-1751135135933.js";import"./react-vendor-DV_4xMyD-1751135135933.js";import"./pdf-vendor-BgibwAzC-1751135135933.js";import"./ai-vendor-D-53sdHu-1751135135933.js";import"./scanner-vendor-UkOZGUfT-1751135135933.js";const ne=({data:o,type:x,title:W,subtitle:k,showGrid:Z=!0,showTooltip:j=!0,showLegend:G=!0,animated:m=!0,height:S=300,colors:w=["#14b8a6","#06b6d4","#8b5cf6","#f59e0b","#ef4444"],unit:L="",showTarget:I=!1,targetValue:y,className:P=""})=>{var p,M;const{isMobile:D}=X(),E=$.useRef(null),[F,A]=$.useState(null),[C,h]=$.useState(0);$.useEffect(()=>{if(m){const i=setInterval(()=>{h(r=>r>=100?(clearInterval(i),100):r+2)},20);return()=>clearInterval(i)}else h(100)},[m]);const n=Math.max(...o.map(i=>Math.max(i.value,i.target||0))),t=S-(W?60:20),s=i=>{var r;return((r=o[i])==null?void 0:r.color)||w[i%w.length]},l=()=>{var N;if(o.length===0)return null;const i=D?300:400,r=40,R=i-r*2,f=o.map((c,d)=>({x:r+d*R/(o.length-1),y:t-c.value/n*(t-r)+20,value:c.value,label:c.label}));f.map((c,d)=>`${d===0?"M":"L"} ${c.x} ${c.y}`).join(" ");const u=f.slice(0,Math.ceil(o.length*C/100)),g=u.map((c,d)=>`${d===0?"M":"L"} ${c.x} ${c.y}`).join(" ");return e.jsxs("svg",{width:i,height:t,className:"overflow-visible",children:[Z&&e.jsx("g",{className:"opacity-20",children:Array.from({length:5},(c,d)=>e.jsx("line",{x1:r,y1:20+d*(t-r)/4,x2:i-r,y2:20+d*(t-r)/4,stroke:"currentColor",strokeWidth:1,className:"text-gray-400"},d))}),I&&y&&e.jsx("line",{x1:r,y1:t-y/n*(t-r)+20,x2:i-r,y2:t-y/n*(t-r)+20,stroke:"#ef4444",strokeWidth:2,strokeDasharray:"5,5",className:"opacity-70"}),x==="area"&&e.jsx("path",{d:`${g} L ${((N=f[u.length-1])==null?void 0:N.x)||r} ${t-20} L ${r} ${t-20} Z`,fill:"url(#gradient-0)",opacity:.3}),e.jsx("path",{d:g,fill:"none",stroke:s(0),strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm"}),u.map((c,d)=>e.jsx("circle",{cx:c.x,cy:c.y,r:F===d?6:4,fill:s(0),className:"cursor-pointer transition-all duration-200 drop-shadow-sm",onMouseEnter:()=>A(d),onMouseLeave:()=>A(null)},d)),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient-0",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:s(0),stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:s(0),stopOpacity:.1})]})})]})},a=()=>{const i=D?300:400,r=40,R=(i-r*2)/o.length*.8,f=(i-r*2)/o.length*.2;return e.jsxs("svg",{width:i,height:t,children:[Z&&e.jsx("g",{className:"opacity-20",children:Array.from({length:5},(u,g)=>e.jsx("line",{x1:r,y1:20+g*(t-r)/4,x2:i-r,y2:20+g*(t-r)/4,stroke:"currentColor",strokeWidth:1,className:"text-gray-400"},g))}),o.map((u,g)=>{const N=u.value/n*(t-r)*(C/100),c=r+g*(R+f),d=t-N-20;return e.jsxs("g",{children:[e.jsx("rect",{x:c,y:d,width:R,height:N,fill:`url(#barGradient-${g})`,className:"cursor-pointer transition-all duration-200",onMouseEnter:()=>A(g),onMouseLeave:()=>A(null),style:{filter:F===g?"brightness(1.1)":"none"}}),e.jsxs("text",{x:c+R/2,y:d-5,textAnchor:"middle",className:"text-xs font-medium fill-current text-gray-700 dark:text-gray-300",children:[u.value,L]})]},g)}),e.jsx("defs",{children:o.map((u,g)=>e.jsxs("linearGradient",{id:`barGradient-${g}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:s(g),stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:s(g),stopOpacity:.6})]},g))})]})},b=()=>{const i=D?200:250,r=i/2,R=i/2-30,f=R*.6,u=o.reduce((d,T)=>d+T.value,0);let g=-90;const N=(d,T,O,H)=>{const z=c(r,r,O,T),q=c(r,r,O,d),Q=c(r,r,H,T),J=c(r,r,H,d),K=T-d<=180?"0":"1";return`M ${z.x} ${z.y} A ${O} ${O} 0 ${K} 0 ${q.x} ${q.y} L ${J.x} ${J.y} A ${H} ${H} 0 ${K} 1 ${Q.x} ${Q.y} Z`},c=(d,T,O,H)=>{const z=(H-90)*Math.PI/180;return{x:d+O*Math.cos(z),y:T+O*Math.sin(z)}};return e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("svg",{width:i,height:i,children:[o.map((d,T)=>{d.value/u*100;const O=d.value/u*360*(C/100),H=g,z=g+O;return g+=d.value/u*360,O<1?null:e.jsx("path",{d:N(H,z,R,f),fill:s(T),className:"cursor-pointer transition-all duration-200",onMouseEnter:()=>A(T),onMouseLeave:()=>A(null),style:{filter:F===T?"brightness(1.1)":"none",transform:F===T?"scale(1.05)":"scale(1)",transformOrigin:"center"}},T)}),e.jsx("text",{x:r,y:r-5,textAnchor:"middle",className:"text-lg font-bold fill-current",children:u.toLocaleString()}),e.jsxs("text",{x:r,y:r+15,textAnchor:"middle",className:"text-sm fill-current opacity-70",children:["Total ",L]})]})})},v=()=>{switch(x){case"line":case"area":return l();case"bar":return a();case"donut":return b();default:return null}};return e.jsxs("div",{className:`bg-bg-card rounded-xl p-6 shadow-lg border border-border-default ${P}`,children:[(W||k)&&e.jsxs("div",{className:"mb-6",children:[W&&e.jsx("h3",{className:"text-lg font-semibold text-text-default mb-1",children:W}),k&&e.jsx("p",{className:"text-sm text-text-alt",children:k})]}),e.jsx("div",{ref:E,className:"flex justify-center mb-4",children:v()}),G&&x!=="line"&&x!=="area"&&e.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:o.map((i,r)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:s(r)}}),e.jsx("span",{className:"text-sm text-text-default",children:i.label}),e.jsxs("span",{className:"text-sm text-text-alt",children:["(",i.value,L,")"]})]},r))}),j&&F!==null&&e.jsxs("div",{className:"absolute bg-gray-900 text-white p-2 rounded-lg shadow-lg pointer-events-none z-10 transform -translate-x-1/2 -translate-y-full",children:[e.jsx("div",{className:"text-sm font-medium",children:(p=o[F])==null?void 0:p.label}),e.jsxs("div",{className:"text-xs",children:[(M=o[F])==null?void 0:M.value,L]})]})]})},oe=({data:o,targets:x,showPercentages:W=!0,showMacroRings:k=!0,showMicronutrients:Z=!1,variant:j="detailed",className:G=""})=>{const{isMobile:m}=X(),[S,w]=$.useState(null),L=o.protein*4,I=o.carbs*4,y=o.fat*9,P=L+I+y,D={protein:P>0?L/P*100:0,carbs:P>0?I/P*100:0,fat:P>0?y/P*100:0},E={protein:"#ef4444",carbs:"#3b82f6",fat:"#f59e0b"},F=()=>{const h=m?120:150,n=h/2,t=h/2-20,s=12,l=2*Math.PI*t;let a=0;const b=p=>{const M=p/100*l;return`${M} ${l-M}`},v=p=>-p;return e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{width:h,height:h,className:"transform -rotate-90",children:[e.jsx("circle",{cx:n,cy:n,r:t,fill:"none",stroke:"currentColor",strokeWidth:s,className:"text-gray-200 dark:text-gray-700"}),e.jsx("circle",{cx:n,cy:n,r:t,fill:"none",stroke:E.protein,strokeWidth:s,strokeDasharray:b(D.protein),strokeDashoffset:v(a),strokeLinecap:"round",className:`transition-all duration-500 ${S==="protein"?"filter brightness-110":""}`,onMouseEnter:()=>w("protein"),onMouseLeave:()=>w(null)}),(a+=D.protein/100*l,e.jsx("circle",{cx:n,cy:n,r:t,fill:"none",stroke:E.carbs,strokeWidth:s,strokeDasharray:b(D.carbs),strokeDashoffset:v(a),strokeLinecap:"round",className:`transition-all duration-500 ${S==="carbs"?"filter brightness-110":""}`,onMouseEnter:()=>w("carbs"),onMouseLeave:()=>w(null)})),(a+=D.carbs/100*l,e.jsx("circle",{cx:n,cy:n,r:t,fill:"none",stroke:E.fat,strokeWidth:s,strokeDasharray:b(D.fat),strokeDashoffset:v(a),strokeLinecap:"round",className:`transition-all duration-500 ${S==="fat"?"filter brightness-110":""}`,onMouseEnter:()=>w("fat"),onMouseLeave:()=>w(null)}))]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-sm font-bold text-text-default",children:o.calories.toLocaleString()}),e.jsx("span",{className:"text-xs text-text-alt",children:"calories"})]})]})},A=(h,n,t,s,l)=>{const a=l?Math.min(n/l*100,100):0,b=S===h.toLowerCase();return e.jsxs("div",{className:`p-3 rounded-lg transition-all duration-200 cursor-pointer ${b?"bg-gray-50 dark:bg-gray-800 scale-105":""}`,onMouseEnter:()=>w(h.toLowerCase()),onMouseLeave:()=>w(null),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s}}),e.jsx("span",{className:"text-sm font-medium text-text-default",children:h})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-text-default",children:[n,"g"]}),e.jsxs("div",{className:"text-xs text-text-alt",children:[t," cal"]})]})]}),W&&e.jsxs("div",{className:"text-xs text-text-alt mb-1",children:[D[h.toLowerCase()].toFixed(1),"% of macros"]}),l&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-text-alt",children:["Target: ",l,"g"]}),e.jsxs("span",{className:"text-text-alt",children:[a.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:`${a}%`,backgroundColor:s}})})]})]},h)},C=()=>{if(!Z)return null;const h=[{label:"Fiber",value:o.fiber||0,unit:"g",target:x==null?void 0:x.fiber,color:"#10b981"},{label:"Sugar",value:o.sugar||0,unit:"g",target:x==null?void 0:x.sugar,color:"#f59e0b"},{label:"Sodium",value:o.sodium||0,unit:"mg",target:x==null?void 0:x.sodium,color:"#8b5cf6"}];return e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-text-default mb-3",children:"Micronutrients"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:h.map(n=>{const t=n.target?Math.min(n.value/n.target*100,100):0;return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:n.color},children:n.value})}),n.target&&e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-transparent",style:{background:`conic-gradient(${n.color} ${t*3.6}deg, transparent ${t*3.6}deg)`}})]}),e.jsx("div",{className:"text-xs text-text-default font-medium",children:n.label}),e.jsxs("div",{className:"text-xs text-text-alt",children:[n.value,n.unit]}),n.target&&e.jsxs("div",{className:"text-xs text-text-alt",children:["/ ",n.target,n.unit]})]},n.label)})})]})};return j==="compact"?e.jsx("div",{className:`bg-bg-card rounded-lg p-4 shadow-md border border-border-default ${G}`,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-alt",children:"Protein"}),e.jsxs("span",{className:"font-medium text-text-default",children:[o.protein,"g"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-alt",children:"Carbs"}),e.jsxs("span",{className:"font-medium text-text-default",children:[o.carbs,"g"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-alt",children:"Fat"}),e.jsxs("span",{className:"font-medium text-text-default",children:[o.fat,"g"]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-text-default",children:o.calories}),e.jsx("div",{className:"text-xs text-text-alt",children:"calories"})]})]})}):e.jsxs("div",{className:`bg-bg-card rounded-xl p-6 shadow-lg border border-border-default ${G}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-text-default mb-4",children:"Nutrition Breakdown"}),j==="visual"&&k?e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[F(),e.jsx("div",{className:"grid grid-cols-3 gap-4 w-full",children:Object.entries(E).map(([h,n])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mx-auto mb-1",style:{backgroundColor:n}}),e.jsx("div",{className:"text-xs text-text-alt capitalize",children:h}),e.jsxs("div",{className:"text-sm font-medium text-text-default",children:[o[h],"g"]}),e.jsxs("div",{className:"text-xs text-text-alt",children:[D[h].toFixed(1),"%"]})]},h))})]}):e.jsxs("div",{className:"space-y-4",children:[A("Protein",o.protein,L,E.protein,x==null?void 0:x.protein),A("Carbs",o.carbs,I,E.carbs,x==null?void 0:x.carbs),A("Fat",o.fat,y,E.fat,x==null?void 0:x.fat)]}),C()]})};U.register(...te);const be=({foodLog:o,isPremiumUser:x,onUpgradeClick:W})=>{const[k,Z]=$.useState("7d"),[j,G]=$.useState("calories"),m=$.useMemo(()=>{var R;const t=new Date;let s;switch(k){case"7d":s=_(t,7);break;case"30d":s=_(t,30);break;case"90d":s=_(t,90);break}const l=o.filter(f=>{const u=new Date(f.timestamp);return V(u,{start:s,end:t})}),a=re({start:s,end:t}).map(f=>{const g=l.filter(N=>{const c=new Date(N.timestamp);return B(c,"yyyy-MM-dd")===B(f,"yyyy-MM-dd")}).reduce((N,c)=>({calories:N.calories+(c.calories||0),protein:N.protein+(c.protein||0),carbs:N.carbs+(c.carbs||0),fat:N.fat+(c.fat||0)}),{calories:0,protein:0,carbs:0,fat:0});return{date:B(f,"yyyy-MM-dd"),label:B(f,"MMM dd"),...g}}),b=[];for(let f=0;f<Math.ceil(a.length/7);f++){const u=f*7,g=a.slice(u,u+7),N=g.reduce((c,d)=>({calories:c.calories+d.calories,protein:c.protein+d.protein,carbs:c.carbs+d.carbs,fat:c.fat+d.fat}),{calories:0,protein:0,carbs:0,fat:0});b.push({label:`Week ${f+1}`,date:((R=g[0])==null?void 0:R.date)||"",...N})}const v=l.reduce((f,u)=>f+(u.calories||0),0),p=l.reduce((f,u)=>f+(u.protein||0),0),M=l.reduce((f,u)=>f+(u.carbs||0),0),i=l.reduce((f,u)=>f+(u.fat||0),0),r=a.length>0?v/a.length:0;return{dailyData:a,weeklyData:b,totals:{calories:v,protein:p,carbs:M,fat:i},averages:{calories:r},filteredLog:l}},[o,k]),S=$.useRef(null),w=$.useRef(null),L=$.useRef(null),I=$.useRef(null),y=$.useRef({caloriesTrend:null,macroDistribution:null,weeklyComparison:null,mealTiming:null}),P=()=>{const t=new Date;let s;switch(k){case"7d":s=_(t,7);break;case"30d":s=_(t,30);break;case"90d":s=_(t,90);break}return o.filter(l=>{const a=new Date(l.date);return V(a,{start:s,end:t})})},D=t=>{const s={};return t.forEach(l=>{const a=B(new Date(l.date),"yyyy-MM-dd");s[a]||(s[a]={calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0,sodium:0,meals:[]}),s[a].calories+=l.calories||0,s[a].protein+=l.protein||0,s[a].carbs+=l.carbs||0,s[a].fat+=l.fat||0,s[a].fiber+=l.fiber||0,s[a].sugar+=l.sugar||0,s[a].sodium+=l.sodium||0,s[a].meals.push(l)}),s};if($.useEffect(()=>{if(!x)return;const t=P(),s=D(t);if(S.current){const l=S.current.getContext("2d");if(!l)return;y.current.caloriesTrend&&y.current.caloriesTrend.destroy();const a=Object.keys(s).sort(),b=a.map(v=>s[v][j]);y.current.caloriesTrend=new U(l,{type:"line",data:{labels:a.map(v=>B(new Date(v),"MMM d")),datasets:[{label:j.charAt(0).toUpperCase()+j.slice(1),data:b,borderColor:"rgb(20, 184, 166)",backgroundColor:"rgba(20, 184, 166, 0.1)",tension:.3,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:`${j.charAt(0).toUpperCase()+j.slice(1)} Trend`}},scales:{y:{beginAtZero:!0}}}})}if(w.current){const l=w.current.getContext("2d");if(!l)return;y.current.macroDistribution&&y.current.macroDistribution.destroy();const a=Object.values(s).reduce((b,v)=>(b.protein+=v.protein,b.carbs+=v.carbs,b.fat+=v.fat,b),{protein:0,carbs:0,fat:0});y.current.macroDistribution=new U(l,{type:"doughnut",data:{labels:["Protein","Carbs","Fat"],datasets:[{data:[a.protein,a.carbs,a.fat],backgroundColor:["rgb(239, 68, 68)","rgb(59, 130, 246)","rgb(251, 191, 36)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Macro Distribution"}}}})}if(L.current){const l=L.current.getContext("2d");if(!l)return;y.current.weeklyComparison&&y.current.weeklyComparison.destroy();const a={};Object.entries(s).forEach(([p,M])=>{const i=B(le(new Date(p)),"yyyy-MM-dd");a[i]||(a[i]={total:0,count:0}),a[i].total+=M.calories,a[i].count+=1});const b=Object.keys(a).sort(),v=b.map(p=>a[p].total/a[p].count);y.current.weeklyComparison=new U(l,{type:"bar",data:{labels:b.map(p=>B(new Date(p),"MMM d")),datasets:[{label:"Average Daily Calories",data:v,backgroundColor:"rgba(20, 184, 166, 0.6)",borderColor:"rgb(20, 184, 166)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Weekly Average Comparison"}},scales:{y:{beginAtZero:!0}}}})}if(I.current){const l=I.current.getContext("2d");if(!l)return;y.current.mealTiming&&y.current.mealTiming.destroy();const a={};t.forEach(p=>{const M=new Date(p.date).getHours();a[M]=(a[M]||0)+p.calories});const b=Array.from({length:24},(p,M)=>M),v=b.map(p=>a[p]||0);y.current.mealTiming=new U(l,{type:"radar",data:{labels:b.map(p=>`${p}:00`),datasets:[{label:"Calories by Hour",data:v,borderColor:"rgb(20, 184, 166)",backgroundColor:"rgba(20, 184, 166, 0.2)",pointBackgroundColor:"rgb(20, 184, 166)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(20, 184, 166)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Meal Timing Pattern"}},scales:{r:{beginAtZero:!0,ticks:{display:!1}}}}})}return()=>{Object.values(y.current).forEach(l=>{l&&l.destroy()})}},[o,k,j,x]),!x)return e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-white/50 dark:bg-gray-800/50 rounded-lg flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx("i",{className:"fas fa-chart-line text-6xl text-teal-500 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-text-default mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-text-alt mb-6",children:"Unlock powerful insights with detailed nutrition trends, weekly comparisons, meal timing analysis, and more."}),e.jsxs("button",{onClick:W,className:"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transition-all",children:[e.jsx("i",{className:"fas fa-crown mr-2"}),"Upgrade to Premium"]})]})}),e.jsxs("div",{className:"opacity-20",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Advanced Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})]})]});const E=P(),F=D(E),A=Object.values(F),C=A.length,h=A.reduce((t,s)=>(t.totalCalories+=s.calories,t.totalProtein+=s.protein,t.totalCarbs+=s.carbs,t.totalFat+=s.fat,t),{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0}),n={avgCalories:C>0?h.totalCalories/C:0,avgProtein:C>0?h.totalProtein/C:0,avgCarbs:C>0?h.totalCarbs/C:0,avgFat:C>0?h.totalFat/C:0,totalDays:C};return m.filteredLog.length===0?e.jsx(Y,{title:"Advanced Analytics",icon:"fas fa-chart-line",iconColor:"text-teal-500",animation:"fade",children:e.jsx(ee,{icon:"fas fa-chart-pie",iconColor:"text-teal-500 dark:text-teal-400",title:"No Data to Analyze",description:`Start logging your meals to see detailed analytics for the ${k==="7d"?"last 7 days":k==="30d"?"last 30 days":"last 90 days"}.`,actionLabel:"Log Your First Meal",onAction:()=>window.dispatchEvent(new CustomEvent("navigate-to-foodlog")),tips:["Track meals consistently for meaningful insights","Add macros (protein, carbs, fat) for detailed analysis","Check back after a week of logging for trends"]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(Y,{title:"Advanced Analytics",icon:"fas fa-chart-line",iconColor:"text-teal-500",animation:"lift",children:e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("select",{value:k,onChange:t=>Z(t.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-text-default focus:outline-none focus:ring-2 focus:ring-teal-500",children:[e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"})]}),e.jsxs("select",{value:j,onChange:t=>G(t.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-text-default focus:outline-none focus:ring-2 focus:ring-teal-500",children:[e.jsx("option",{value:"calories",children:"Calories"}),e.jsx("option",{value:"protein",children:"Protein"}),e.jsx("option",{value:"carbs",children:"Carbs"}),e.jsx("option",{value:"fat",children:"Fat"})]})]})}),e.jsx(se,{title:"Daily Averages",metrics:[{label:"Daily Calories",value:m.averages.calories,format:"number",unit:"kcal",color:"bg-blue-500"},{label:"Daily Protein",value:m.totals.protein/m.dailyData.length||0,format:"decimal",unit:"g",color:"bg-red-500"},{label:"Daily Carbs",value:m.totals.carbs/m.dailyData.length||0,format:"decimal",unit:"g",color:"bg-green-500"},{label:"Daily Fat",value:m.totals.fat/m.dailyData.length||0,format:"decimal",unit:"g",color:"bg-yellow-500"}],variant:"compact",showTrends:!1,animated:!0}),e.jsx(oe,{data:{protein:m.totals.protein/m.dailyData.length||0,carbs:m.totals.carbs/m.dailyData.length||0,fat:m.totals.fat/m.dailyData.length||0,calories:m.averages.calories},showPercentages:!0,showMacroRings:!0,variant:"visual"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ae,{data:m.dailyData.map(t=>({date:t.date,value:t[j],label:t.label})),title:`${j.charAt(0).toUpperCase()+j.slice(1)} Trend`,subtitle:`Daily ${j} over time`,showTarget:!1,showDots:!0,showArea:!0,color:"#14b8a6",timeframe:k==="7d"?"week":k==="30d"?"month":"quarter",unit:j==="calories"?" kcal":" g",height:250}),e.jsx(ne,{data:m.weeklyData.map((t,s)=>({label:t.label,value:t[j],color:`hsl(${s*60}, 70%, 50%)`})),type:"bar",title:"Weekly Comparison",showGrid:!0,showTooltip:!0,showLegend:!1,animated:!0,height:250,unit:j==="calories"?" kcal":" g"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Avg Calories"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:Math.round(n.avgCalories)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:"Avg Protein"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:[Math.round(n.avgProtein),"g"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Avg Carbs"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:[Math.round(n.avgCarbs),"g"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 font-medium",children:"Avg Fat"}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:[Math.round(n.avgFat),"g"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Days Tracked"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:n.totalDays})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:e.jsx("div",{className:"h-64",children:e.jsx("canvas",{ref:S})})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:e.jsx("div",{className:"h-64",children:e.jsx("canvas",{ref:w})})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:e.jsx("div",{className:"h-64",children:e.jsx("canvas",{ref:L})})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:e.jsx("div",{className:"h-64",children:e.jsx("canvas",{ref:I})})})]}),e.jsx(Y,{title:"Insights & Tips",icon:"fas fa-lightbulb",iconColor:"text-teal-500",animation:"fade",className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-700",children:e.jsxs("ul",{className:"text-sm text-teal-700 dark:text-teal-300 space-y-2",children:[m.averages.calories<1500&&e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-500"}),e.jsx("span",{children:"Your average calorie intake seems low. Consider consulting with a nutritionist."})]}),m.totals.protein/m.dailyData.length<50&&e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-dumbbell text-red-500"}),e.jsx("span",{children:"Try to increase your protein intake for better muscle maintenance."})]}),m.dailyData.length<7&&e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-calendar-check text-blue-500"}),e.jsx("span",{children:"Track more days to get better insights into your eating patterns."})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-clock text-green-500"}),e.jsx("span",{children:"Consistent meal timing can help regulate your metabolism."})]})]})})]})};export{be as default};
