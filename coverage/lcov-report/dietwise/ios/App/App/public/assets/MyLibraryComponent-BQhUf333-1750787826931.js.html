
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for dietwise/ios/App/App/public/assets/MyLibraryComponent-BQhUf333-1750787826931.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../../index.html">All files</a> / <a href="index.html">dietwise/ios/App/App/public/assets</a> MyLibraryComponent-BQhUf333-1750787826931.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" >import{c as me,t as p,u as ue,j as e,M as A,a as S,A as fe,L as he}from"./index-CCetcO3c-1750787826931.js";import{r}from"./stripe-vendor-B3HR4MyU-1750787826931.js";import"./react-vendor-DV_4xMyD-1750787826931.js";import"./pdf-vendor-DY8QywdO-1750787826931.js";import"./date-vendor-Ck9yc1TP-1750787826931.js";import"./ai-vendor-D-53sdHu-1750787826931.js";import"./scanner-vendor-UkOZGUfT-1750787826931.js";import"./chart-vendor-0DHGgTMd-1750787826931.js";const z="myfood-barcode-video",ge=({sizeLabel:u="Banner Ad (e.g., 320x50)",className:f=""})=&gt;e.jsxs("div",{className:`bg-slate-200 dark:bg-slate-700 border-2 border-dashed border-slate-400 dark:border-slate-500 text-slate-500 dark:text-slate-400 text-sm flex flex-col items-center justify-center h-20 sm:h-24 my-6 rounded-md shadow text-center p-2 ${f}`,children:[e.jsx("i",{className:"fas fa-ad text-2xl text-slate-400 dark:text-slate-500 mb-1"}),e.jsx("p",{className:"font-semibold",children:"Advertisement"}),e.jsx("p",{className:"text-xs",children:u})]}),Ce=({myFoods:u,myMeals:f,onAddFood:H,onUpdateFood:T,onDeleteFood:J,onAddMeal:Q,onUpdateMeal:W,onDeleteMeal:X,onLogMeal:Z,apiKeyMissing:C,userName:v,targetCalories:O})=&gt;{const[K,h]=r.useState(!1),[ee,F]=r.useState(!1),[b,L]=r.useState(null),[w,P]=r.useState(null),[a,i]=r.useState({}),[n,m]=r.useState({ingredients:[]}),[j,o]=r.useState(null),[te,M]=r.useState(!1),[N,x]=r.useState(null),[y,k]=r.useState(!1),[I,R]=r.useState(null),[D,E]=r.useState([]),se=r.useCallback(t=&gt;{R(t),k(!0),x(null),E([]),me(t).then(s=&gt;{if(s.foodInfo&amp;&amp;s.foodInfo.name?(i({name:s.foodInfo.name,calories:s.foodInfo.calories,servingSize:s.foodInfo.servingSize,protein:s.foodInfo.protein,carbs:s.foodInfo.carbs,fat:s.foodInfo.fat}),p("myfood_upc_food_info_retrieved",{foodName:s.foodInfo.name}),M(!1),h(!0)):(x(s.error||"Could not retrieve food information for this UPC."),p("myfood_upc_food_info_error",{error:s.error})),s.sources){const l=s.sources.filter(d=&gt;d.web!==void 0).map(d=&gt;({web:d.web}));E(l)}}).catch(s=&gt;{x(s.message||"An unexpected error occurred."),p("myfood_upc_food_info_exception",{error:s.message})}).finally(()=&gt;k(!1))},[]),ae=r.useCallback(t=&gt;{x(`Scanner Error: ${t.message}. Please ensure camera access is allowed.`),p("myfood_upc_scan_error_hook",{error:t.message}),k(!1),B()},[]),{startScan:le,stopScan:B,isScanning:_,error:$,videoRef:q}=ue({onScanSuccess:se,onScanError:ae,videoElementId:z});r.useEffect(()=&gt;{$&amp;&amp;x(`Scanner Init Error: ${$}. Check camera permissions.`)},[$]);const re=()=&gt;{C||(h(!1),M(!0),x(null),R(null),k(!1),E([]),i({}),setTimeout(()=&gt;{const t=document.getElementById(z);q.current&amp;&amp;t&amp;&amp;t.isConnected?le().catch(s=&gt;{x(`Failed to start camera: ${s.message}.`),p("myfood_scanner_start_failed",{error:s.message})}):x("Camera element not ready for MyFood scanner.")},100))},U=()=&gt;{B(),M(!1),h(!0)},c="mt-1 block w-full px-4 py-2.5 border border-border-default rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 sm:text-sm placeholder-slate-400 bg-bg-card text-text-default dark:placeholder-slate-500",g="bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition-colors disabled:opacity-50",ne="bg-red-500 hover:bg-red-600 text-white font-semibold py-1.5 px-3 rounded text-xs shadow",G=(t=null)=&gt;{L(t),i(t?{...t}:{name:"",calories:void 0}),o(null),h(!0)},oe=()=&gt;{var t;if(o(null),!((t=a.name)!=null&amp;&amp;t.trim())){o("Food name is required.");return}if(a.calories===void 0||a.calories===null||isNaN(a.calories)||a.calories&lt;=0){o("Valid calories (must be a positive number) are required.");return}b?T(a):H(a),h(!1),i({})},Y=(t=null)=&gt;{P(t),m(t?{...t,ingredients:t.ingredients?[...t.ingredients]:[]}:{name:"",description:"",ingredients:[]}),o(null),F(!0)},ie=()=&gt;{var t;if(o(null),!((t=n.name)!=null&amp;&amp;t.trim())){o("Meal name is required.");return}if(!n.ingredients||n.ingredients.length===0){o("A meal must have at least one ingredient.");return}if(n.ingredients.some(s=&gt;!s.foodId||s.servings&lt;=0)){o("All ingredients must be selected and have a valid serving size (&gt;0).");return}w?W(n):Q(n),F(!1),m({ingredients:[]})},V=(t,s,l)=&gt;{const d=[...n.ingredients||[]];s==="servings"?d[t]={...d[t],[s]:parseFloat(l)||1}:d[t]={...d[t],[s]:l},m(xe=&gt;({...xe,ingredients:d}))},de=()=&gt;{m(t=&gt;({...t,ingredients:[...t.ingredients||[],{foodId:"",servings:1}]}))},ce=t=&gt;{m(s=&gt;({...s,ingredients:(s.ingredients||[]).filter((l,d)=&gt;d!==t)}))};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-bg-card p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border-default",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-text-default",children:[e.jsx("i",{className:"fas fa-carrot mr-2.5 text-orange-500 dark:text-orange-400"}),"My Foods"]}),e.jsxs("button",{onClick:()=&gt;G(),className:g,children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),"Add Food"]})]}),e.jsxs("p",{className:"text-sm text-text-alt mb-4",children:[v?`${v}, save your favorite foods here for quick logging.`:"Save your favorite foods here for quick logging.",O&amp;&amp;` Remember, your daily goal is ${O.toLocaleString()} calories.`]}),u.length===0?e.jsx("p",{className:"text-text-alt text-center py-4",children:"No custom foods saved yet. Add your frequently eaten items!"}):e.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:u.map(t=&gt;e.jsxs("li",{className:"p-4 border border-border-default rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-text-default",children:t.name}),e.jsxs("p",{className:"text-xs text-text-alt",children:[t.calories," kcal",t.servingSize?` / ${t.servingSize}`:""]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=&gt;G(t),className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 p-1","aria-label":`Edit ${t.name}`,children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{onClick:()=&gt;J(t.id),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 p-1","aria-label":`Delete ${t.name}`,children:e.jsx("i",{className:"fas fa-trash"})})]})]},t.id))})]}),e.jsxs("div",{className:"bg-bg-card p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-border-default",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold text-text-default",children:[e.jsx("i",{className:"fas fa-utensils mr-2.5 text-purple-500 dark:text-purple-400"}),"My Meals"]}),e.jsxs("button",{onClick:()=&gt;Y(),className:g,children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),"Create Meal"]})]}),e.jsxs("p",{className:"text-sm text-text-alt mb-4",children:[v?`${v}, create meal combinations for faster tracking.`:"Create meal combinations for faster tracking.",f.length&gt;0&amp;&amp;` You have ${f.length} meal${f.length===1?"":"s"} saved.`]}),f.length===0?e.jsx("p",{className:"text-text-alt text-center py-4",children:"No custom meals created yet. Combine your foods into meals!"}):e.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:f.map(t=&gt;{var s;return e.jsxs("li",{className:"p-4 border border-border-default rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-text-default",children:t.name}),e.jsxs("p",{className:"text-xs text-text-alt",children:[((s=t.totalCalories)==null?void 0:s.toFixed(0))||0," kcal. ",t.ingredients.length," ingredient",t.ingredients.length===1?"":"s","."]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsxs("button",{onClick:()=&gt;Z(t.id),className:`${g} text-xs py-1 px-2.5 bg-green-500 hover:bg-green-600`,"aria-label":`Log ${t.name}`,children:[e.jsx("i",{className:"fas fa-plus-circle mr-1"}),"Log"]}),e.jsx("button",{onClick:()=&gt;Y(t),className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 p-1","aria-label":`Edit ${t.name}`,children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{onClick:()=&gt;X(t.id),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 p-1","aria-label":`Delete ${t.name}`,children:e.jsx("i",{className:"fas fa-trash"})})]})]},t.id)})})]}),e.jsx(ge,{sizeLabel:"Food Library Ad (e.g., 300x100)",className:"mt-6"}),e.jsxs(A,{isOpen:K,onClose:()=&gt;{h(!1),L(null),i({}),o(null)},title:b?"Edit Food":"Add New Food",children:[j&amp;&amp;e.jsx(S,{type:"error",message:j,onClose:()=&gt;o(null),className:"mb-3"}),e.jsxs("div",{className:"space-y-4",children:[!b&amp;&amp;e.jsxs("button",{onClick:re,disabled:C,className:`${g} w-full bg-gradient-to-r from-sky-500 to-cyan-500 hover:from-sky-600 hover:to-cyan-600 text-white font-semibold py-2.5 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-all mb-3 disabled:opacity-60 disabled:cursor-not-allowed`,children:[e.jsx("i",{className:"fas fa-barcode mr-2"}),"Scan Barcode to Pre-fill"]}),C&amp;&amp;!b&amp;&amp;e.jsx(S,{type:"warning",message:e.jsxs(e.Fragment,{children:[fe," ",e.jsx("br",{})," Barcode scanning is disabled."]}),className:"mb-2 text-xs"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"foodName",className:"block text-sm font-medium text-text-alt",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"foodName",value:a.name||"",onChange:t=&gt;i(s=&gt;({...s,name:t.target.value})),className:c,maxLength:100})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"foodCalories",className:"block text-sm font-medium text-text-alt",children:["Calories (kcal) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"foodCalories",value:a.calories===void 0?"":a.calories,onChange:t=&gt;i(s=&gt;({...s,calories:t.target.value===""?void 0:parseFloat(t.target.value)})),className:c,min:"0",step:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"foodServingSize",className:"block text-sm font-medium text-text-alt",children:"Serving Size (e.g., 100g, 1 cup)"}),e.jsx("input",{type:"text",id:"foodServingSize",value:a.servingSize||"",onChange:t=&gt;i(s=&gt;({...s,servingSize:t.target.value})),className:c,maxLength:50})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"foodProtein",className:"text-xs text-text-alt",children:"Protein (g)"}),e.jsx("input",{type:"number",id:"foodProtein",value:a.protein===void 0?"":a.protein,onChange:t=&gt;i(s=&gt;({...s,protein:t.target.value===""?void 0:parseFloat(t.target.value)})),className:c,min:"0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"foodCarbs",className:"text-xs text-text-alt",children:"Carbs (g)"}),e.jsx("input",{type:"number",id:"foodCarbs",value:a.carbs===void 0?"":a.carbs,onChange:t=&gt;i(s=&gt;({...s,carbs:t.target.value===""?void 0:parseFloat(t.target.value)})),className:c,min:"0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"foodFat",className:"text-xs text-text-alt",children:"Fat (g)"}),e.jsx("input",{type:"number",id:"foodFat",value:a.fat===void 0?"":a.fat,onChange:t=&gt;i(s=&gt;({...s,fat:t.target.value===""?void 0:parseFloat(t.target.value)})),className:c,min:"0",step:"0.1"})]})]}),e.jsx("button",{onClick:oe,className:g+" w-full",children:b?"Save Changes":"Add Food"})]})]}),e.jsx(A,{isOpen:te,onClose:U,title:"Scan Barcode for My Food",size:"xl",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"w-full max-w-md aspect-[4/3] bg-slate-200 dark:bg-slate-700 rounded-lg overflow-hidden mb-4 shadow-inner relative",children:[e.jsx("video",{id:z,ref:q,className:`w-full h-full object-cover ${_||y||I?"":"hidden"}`,playsInline:!0}),!(_||y||I||N)&amp;&amp;e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-500 dark:text-slate-400 p-4",children:[e.jsx("i",{className:"fas fa-camera text-5xl mb-3 text-slate-400 dark:text-slate-500"}),e.jsx("p",{className:"text-center text-sm",children:"Initializing camera..."}),e.jsx("p",{className:"text-center text-xs mt-1",children:"Point at a barcode to scan."})]}),_&amp;&amp;!y&amp;&amp;!N&amp;&amp;e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white bg-black bg-opacity-30 p-4",children:[e.jsx("i",{className:"fas fa-barcode text-5xl mb-3 animate-pulse"}),e.jsx("p",{className:"text-center text-sm font-semibold",children:"Scanning..."})]})]}),N&amp;&amp;e.jsx(S,{type:"error",message:N,onClose:()=&gt;x(null),className:"w-full max-w-md"}),y&amp;&amp;e.jsxs("div",{className:"my-4 text-center w-full max-w-md",children:[e.jsx(he,{label:`Fetching info for UPC: ${I}`})," ",e.jsx("p",{className:"text-text-alt mt-2 text-sm",children:"Fetching food info..."})]}),D.length&gt;0&amp;&amp;e.jsxs("div",{className:"mt-4 p-3 bg-sky-50 dark:bg-sky-800/50 border border-sky-200 dark:border-sky-700 rounded-lg w-full max-w-md text-xs",children:[e.jsx("h4",{className:"text-xs font-semibold text-sky-700 dark:text-sky-300 mb-1",children:"Data Sources (from Google Search):"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:D.map((t,s)=&gt;t.web.uri?e.jsx("li",{children:e.jsx("a",{href:t.web.uri,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 dark:text-sky-400 hover:underline hover:text-sky-800 dark:hover:text-sky-300",children:t.web.title||t.web.uri})},s):null)})]}),e.jsx("button",{onClick:U,className:"mt-6 bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:hover:bg-slate-500 dark:text-slate-200 font-semibold py-2.5 px-6 rounded-lg shadow hover:shadow-md transition-all",children:"Close Scanner &amp; Return to Form"})]})}),e.jsxs(A,{isOpen:ee,onClose:()=&gt;{F(!1),P(null),m({ingredients:[]}),o(null)},title:w?"Edit Meal":"Create New Meal",size:"lg",children:[j&amp;&amp;e.jsx(S,{type:"error",message:j,onClose:()=&gt;o(null),className:"mb-3"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"mealName",className:"block text-sm font-medium text-text-alt",children:["Meal Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"mealName",value:n.name||"",onChange:t=&gt;m(s=&gt;({...s,name:t.target.value})),className:c,maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mealDescription",className:"block text-sm font-medium text-text-alt",children:"Description (optional)"}),e.jsx("input",{type:"text",id:"mealDescription",value:n.description||"",onChange:t=&gt;m(s=&gt;({...s,description:t.target.value})),className:c,maxLength:200})]}),e.jsx("h3",{className:"text-md font-semibold text-text-default pt-2 border-t border-border-default",children:"Ingredients"}),n.ingredients&amp;&amp;n.ingredients.map((t,s)=&gt;e.jsxs("div",{className:"flex items-end gap-2 p-2 border border-border-default rounded",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("label",{className:"text-xs text-text-alt",children:["Food Item ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.foodId,onChange:l=&gt;V(s,"foodId",l.target.value),className:c+" text-sm","aria-label":`Ingredient ${s+1} food item`,children:[e.jsx("option",{value:"",children:"Select Food"}),u.map(l=&gt;e.jsxs("option",{value:l.id,children:[l.name," (",l.calories," kcal",l.servingSize?` / ${l.servingSize}`:"",")"]},l.id))]})]}),e.jsxs("div",{className:"w-20",children:[e.jsxs("label",{className:"text-xs text-text-alt",children:["Servings ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:t.servings,onChange:l=&gt;V(s,"servings",l.target.value),className:c+" text-sm",step:"0.1",min:"0.1","aria-label":`Ingredient ${s+1} servings`})]}),e.jsx("button",{onClick:()=&gt;ce(s),className:ne+" mb-1","aria-label":`Remove ingredient ${s+1}`,children:e.jsx("i",{className:"fas fa-times"})})]},s)),e.jsxs("button",{onClick:de,className:"text-sm text-teal-600 hover:text-teal-700 dark:text-teal-400 dark:hover:text-teal-300",children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Ingredient"]}),u.length===0&amp;&amp;e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"You need to add foods to 'My Foods' first to create meals."}),e.jsx("button",{onClick:ie,className:g+" w-full mt-4",disabled:u.length===0&amp;&amp;(!n.ingredients||n.ingredients.length===0),children:w?"Save Changes":"Create Meal"})]})]})]})};export{Ce as default};<span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" ></span></span></span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-06-25T15:38:37.352Z
            </div>
        <script src="../../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../../sorter.js"></script>
        <script src="../../../../../../block-navigation.js"></script>
    </body>
</html>
    